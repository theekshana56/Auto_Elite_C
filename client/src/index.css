/* Tailwind base + components + utilities */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens (keep in sync with tailwind.config.js) */
:root {
  --max-width: 1200px;

  /* Tailwind HSL color tokens */
  --background: 222 47% 10%;
  --foreground: 222 20% 98%;
  --card: 222 47% 12%;
  --card-foreground: 222 20% 98%;
  --popover: 222 47% 12%;
  --popover-foreground: 222 20% 98%;
  --primary: 200 100% 60%;
  --primary-foreground: 222 20% 98%;
  --primary-glow: 200 100% 70%;
  --secondary: 222 20% 20%;
  --secondary-foreground: 222 20% 98%;
  --accent: 160 100% 60%;
  --accent-foreground: 222 20% 98%;
  --destructive: 0 100% 60%;
  --destructive-foreground: 222 20% 98%;
  --border: 222 20% 30%;
  --input: 222 20% 20%;
  --ring: 200 100% 60%;
  --muted: 222 20% 30%;
  --muted-foreground: 222 20% 70%;
  --radius: 0.75rem;

  /* Legacy and custom tokens */
  --color-bg: #0b1020;
  --color-surface: #10182a;
  --color-primary: #3fa7ff;
  --color-accent: #4fffb0;
  --color-accent2: #38e8fc;
  --color-muted: #a3b8d0;
  --color-glass: rgba(255, 255, 255, 0.06);

  --shadow-soft: 0 8px 30px rgba(2, 6, 23, 0.7);
  --shadow-glass: 0 6px 18px rgba(2, 6, 23, 0.5);
}

/* Base enhancements */
@layer base {
  html {
    scroll-behavior: smooth;
  }
  body {
    @apply antialiased bg-bg text-slate-200;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    font-feature-settings: "cv02","cv03","cv04","cv11";
  }
  ::selection {
    background: var(--color-primary);
    color: #0b1220;
  }
}

/* Ambient app background */
.bg-app {
  min-height: 100vh;
  color: #dbeafe;
  background-color: var(--color-bg);
  background:
    radial-gradient(1000px 500px at -10% -10%, var(--color-primary) 0%, rgba(63,167,255,0) 55%),
    radial-gradient(800px 400px at 110% 10%, var(--color-accent) 0%, rgba(79,255,176,0) 55%),
    linear-gradient(180deg, #0b1020 0%, #10182a 100%);
  background-attachment: fixed;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* Responsive container */
.app-container {
  max-width: var(--max-width);
  margin: 0 auto;
  padding: 2.25rem;
}
@media (max-width: 1024px) {
  .app-container { padding: 2rem; }
}
@media (max-width: 768px) {
  .app-container { padding: 1.25rem; }
}

/* Components */
@layer components {
  /* Card */
  .card {
    @apply rounded-2xl border border-white/5;
    background: var(--color-surface);
    background: color-mix(in oklab, var(--color-surface) 90%, transparent);
    backdrop-filter: blur(8px);
    box-shadow: var(--shadow-glass);
    transition: transform 200ms ease, box-shadow 200ms ease, border-color 200ms ease;
  }
  .card-hover:hover {
    transform: translateY(-2px);
    box-shadow: 0 16px 40px rgba(2,6,23,0.55);
    @apply border-white/10;
  }
  .card-press:active {
    transform: translateY(0);
    box-shadow: var(--shadow-glass);
  }
  .card-header {
    @apply flex items-center justify-between gap-2 p-4 sm:p-5 md:p-6 border-b border-white/5;
  }
  .card-title {
    @apply text-lg md:text-xl font-semibold tracking-tight text-slate-100;
  }
  .card-subtitle {
    @apply text-sm text-muted;
  }
  .card-body {
    @apply p-4 sm:p-5 md:p-6;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 font-medium transition duration-200 ease-out;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-0;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }
  .btn-primary {
    @apply btn;
    background: linear-gradient(180deg, color-mix(in oklab, var(--color-primary) 92%, #ffffff 0%) 0%, var(--color-primary) 100%);
    color: #0b1220;
    box-shadow: 0 8px 20px rgba(63,167,255,0.25);
  }
  .btn-primary:hover {
    filter: brightness(1.07);
    box-shadow: 0 12px 28px rgba(63,167,255,0.32);
  }
  .btn-secondary {
    @apply btn text-slate-200 border border-white/10;
    background: var(--color-glass);
    backdrop-filter: blur(6px);
  }
  .btn-secondary:hover {
    @apply border-white/20;
    background: rgba(255,255,255,0.08);
  }
  .btn-ghost {
    @apply btn text-muted;
    background: transparent;
  }
  .btn-ghost:hover {
    @apply text-slate-100;
    background: rgba(255,255,255,0.07);
  }
  .btn-icon {
    @apply btn w-10 h-10 p-0 rounded-xl;
  }

  /* Inputs */
  .label {
    @apply block text-xs uppercase tracking-wide text-muted mb-2;
  }
  .input {
    @apply w-full rounded-xl border border-white/10 bg-surface/80 px-4 py-2.5 text-slate-200 placeholder:text-slate-500;
    @apply focus:outline-none focus:border-primary/60 focus:ring-2 focus:ring-primary/30;
    transition: background 150ms ease;
    backdrop-filter: blur(4px);
  }
  .input:hover {
    @apply border-white/20;
    background: var(--color-surface);
    background: color-mix(in oklab, var(--color-surface) 82%, transparent);
  }
  .textarea {
    @apply input min-h-[120px];
  }
  .select {
    @apply input appearance-none bg-no-repeat;
    background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='%2394a3b8' stroke-linecap='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E");
    background-size: 20px 20px;
    background-position: right 0.75rem center;
  }
  .helper {
    @apply mt-1 text-xs text-muted;
  }

  /* Badges/Chips */
  .badge {
    @apply inline-flex items-center gap-1 rounded-full border border-white/10 bg-glass px-2.5 py-1 text-xs font-medium text-slate-300;
    backdrop-filter: blur(4px);
  }
  .chip-accent {
    @apply badge;
    color: var(--color-accent);
    box-shadow: 0 0 0 1px color-mix(in oklab, var(--color-accent) 30%, transparent) inset;
    background: var(--color-accent);
    background: color-mix(in oklab, var(--color-accent) 14%, transparent);
  }

  /* Navigation / panels */
  .nav-bar {
    @apply sticky top-0 z-40 border-b border-white/5;
    background: rgba(16,24,42,0.90);
    background: linear-gradient(180deg, rgba(16,24,42,0.90) 0%, rgba(16,24,42,0.60) 100%);
    backdrop-filter: blur(10px);
  }
  .glass-panel {
    @apply rounded-2xl border border-white/5;
    background: var(--color-glass);
    backdrop-filter: blur(8px);
    box-shadow: var(--shadow-glass);
  }

  /* Utility helpers */
  .gradient-text {
    background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-accent2) 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
  .section-title {
    @apply text-xl md:text-2xl font-semibold text-slate-100;
    letter-spacing: -0.01em;
  }
  .muted {
    @apply text-muted;
  }
  .hover-tilt {
    transform-style: preserve-3d;
    transition: transform 200ms ease;
  }
  .hover-tilt:hover {
    transform: perspective(800px) rotateX(2deg) rotateY(-2deg) translateY(-2px);
  }
  .skeleton {
    @apply animate-pulse rounded-xl bg-white/5;
  }
}

/* Optional subtle grid overlay for hero sections */
.bg-app::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(circle at 1px 1px, rgba(255,255,255,0.04) 1px, transparent 1px);
  background-size: 24px 24px;
  mask-image: linear-gradient(180deg, rgba(255,255,255,0.25) 0%, transparent 40%);
  z-index: 0;
}

/* Ensure content sits above ambient overlays */
.bg-app > * {
  position: relative;
  z-index: 1;
}

/* Notification Bell Dropdown Styles */
.notification-dropdown {
  position: fixed;
  top: 72px; /* Adjust to match your navbar height */
  right: 2.5rem; /* Adjust to align with bell icon */
  min-width: 320px;
  max-width: 90vw;
  background: var(--color-surface, #10182a);
  border-radius: 1rem;
  box-shadow: 0 8px 32px rgba(0,0,0,0.25), 0 1.5px 6px rgba(63,167,255,0.08);
  border: 1px solid rgba(255,255,255,0.07);
  z-index: 1050;
  padding: 1.25rem 1rem;
  margin-top: 0.5rem;
  color: #dbeafe;
  backdrop-filter: blur(8px);
  animation: fadeIn 0.18s cubic-bezier(.4,0,.2,1);
}
@media (max-width: 500px) {
  .notification-dropdown {
    min-width: 90vw;
    right: 0.5rem;
    left: auto;
    padding: 1rem 0.5rem;
  }
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-8px);}
  to { opacity: 1; transform: translateY(0);}
}

.notification-item {
  background: rgba(255,255,255,0.01);
  border-radius: 0.75rem;
  padding: 0.75rem 0.5rem;
  transition: background 0.15s;
}
.notification-item.notification-unread {
  background: rgba(63,167,255,0.08);
}
.notification-item + .notification-item {
  margin-top: 0.5rem;
}